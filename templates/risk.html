{% extends "base.html" %}
{% block title %}Risk Calculator â€” SwingTrader Pro{% endblock %}
{% block content %}
<div class="page-header">
  <div class="page-title">Risk Calculator</div>
  <div class="page-subtitle">Position sizing based on capital risk management</div>
</div>

<div class="grid-2" style="gap:24px">
  <div class="card">
    <div class="card-title mb-16">ðŸ“Š Position Size Calculator</div>
    
    <div class="grid-2" style="gap:12px">
      <div class="form-group">
        <label>Capital (â‚¹)</label>
        <input id="rc-capital" type="number" placeholder="e.g. 100000" min="1000">
      </div>
      <div class="form-group">
        <label>Risk Per Trade (%)</label>
        <input id="rc-risk" type="number" placeholder="e.g. 1.0" min="0.1" max="10" step="0.1">
      </div>
      <div class="form-group">
        <label>Entry Price (â‚¹)</label>
        <input id="rc-entry" type="number" placeholder="e.g. 500.00" min="0.01" step="0.05">
      </div>
      <div class="form-group">
        <label>Stop Loss (â‚¹)</label>
        <input id="rc-sl" type="number" placeholder="e.g. 485.00" min="0.01" step="0.05">
      </div>
    </div>
    <div class="form-group">
      <label>Target Price (â‚¹) â€” optional</label>
      <input id="rc-target" type="number" placeholder="e.g. 540.00" min="0.01" step="0.05">
    </div>

    <div id="rc-results" class="hidden">
      <hr>
      <div class="card-title mb-8">Results</div>
      <div class="calc-result-grid">
        <div class="calc-result-item">
          <div class="calc-result-val" id="rc-qty">â€”</div>
          <div class="calc-result-label">Position Size (Qty)</div>
        </div>
        <div class="calc-result-item">
          <div class="calc-result-val" id="rc-maxloss">â€”</div>
          <div class="calc-result-label">Max Loss</div>
        </div>
        <div class="calc-result-item">
          <div class="calc-result-val" id="rc-rr">â€”</div>
          <div class="calc-result-label">Risk : Reward</div>
        </div>
        <div class="calc-result-item">
          <div class="calc-result-val" id="rc-profit">â€”</div>
          <div class="calc-result-label">Potential Profit</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Reference Guide -->
  <div class="stack">
    <div class="card">
      <div class="card-title mb-16">ðŸ“š Risk Management Rules</div>
      <div class="stack" style="gap:12px">
        <div style="padding:12px; background:var(--bg-2); border-radius:var(--radius); border-left:3px solid var(--green)">
          <div class="fw-600 fs-13">1% Risk Rule</div>
          <div class="fs-12 text-muted mt-4">Never risk more than 1-2% of capital on a single trade. Preserves capital during drawdowns.</div>
        </div>
        <div style="padding:12px; background:var(--bg-2); border-radius:var(--radius); border-left:3px solid var(--accent)">
          <div class="fw-600 fs-13">Minimum 1:2 R:R</div>
          <div class="fs-12 text-muted mt-4">Target at least 2x reward for every 1x risk. Profitable even with 40% win rate.</div>
        </div>
        <div style="padding:12px; background:var(--bg-2); border-radius:var(--radius); border-left:3px solid var(--yellow)">
          <div class="fw-600 fs-13">Max 5% Daily Loss</div>
          <div class="fs-12 text-muted mt-4">Stop trading for the day if total loss exceeds 5% of capital. Avoid revenge trading.</div>
        </div>
        <div style="padding:12px; background:var(--bg-2); border-radius:var(--radius); border-left:3px solid var(--red)">
          <div class="fw-600 fs-13">Position Concentration</div>
          <div class="fs-12 text-muted mt-4">Don't hold more than 25% of capital in a single position. Diversify across sectors.</div>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-title mb-8">Win Rate vs R:R Matrix</div>
      <div class="fs-12 text-muted mb-8">Minimum win rate needed to be profitable</div>
      <table>
        <thead><tr><th>R:R Ratio</th><th>Min Win Rate</th><th>Break-even</th></tr></thead>
        <tbody>
          <tr><td class="text-mono">1 : 1</td><td class="text-mono">50%</td><td><span class="badge badge-yellow">Marginal</span></td></tr>
          <tr><td class="text-mono">1 : 2</td><td class="text-mono">33%</td><td><span class="badge badge-green">Good</span></td></tr>
          <tr><td class="text-mono">1 : 3</td><td class="text-mono">25%</td><td><span class="badge badge-green">Great</span></td></tr>
          <tr><td class="text-mono">1 : 4</td><td class="text-mono">20%</td><td><span class="badge badge-accent">Excellent</span></td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
